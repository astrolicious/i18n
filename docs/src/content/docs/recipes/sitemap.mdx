---
title: Sitemap
---

To enable the sitemap, set the `sitemap` option of the integration config to `true` or an object:

```ts title="astro.config.mjs" ins={3}
i18n({
    // ...
    sitemap: true // or {}
})
```

After you run `astro sync`, you'll be able to import a new function from `i18n:astro/sitemap` on your Astro pages:

```astro
---
import sitemap from "i18n:astro/sitemap"
---
```

This allows you to set specific params at the route level. It's really interesting to generate i18n friendly sitemaps (with alternates):

```ts
import { getCollection } from "astro:content";
import {
	getLocalePlaceholder,
	getDefaultLocalePlaceholder,
	setDynamicParams,
	t,
} from "i18n:astro";
import type { GetStaticPaths } from "astro";
import Layout from "~/layouts/Layout.astro";
import sitemap from "i18n:astro/sitemap";

export const getStaticPaths = (async () => {
	const locale = getLocalePlaceholder();
	const defaultLocale = getDefaultLocalePlaceholder()

	const posts = await getCollection(
		"posts",
		({ slug }) => slug.split("/")[0] === locale,
	);

	return await Promise.all(posts.map(async (post) => {
		const equivalentPosts = await getCollection("posts", (p) => {
			if (locale === defaultLocale) {
				return (
					p.slug === post.slug || p.data.defaultLocaleVersion?.slug === post.slug
				);
			}
			return (
				p.slug === post.data.defaultLocaleVersion?.slug ||
				p.data.defaultLocaleVersion?.slug === post.data.defaultLocaleVersion?.slug
			);
		});

		const dynamicParams = equivalentPosts.map((post) => {
			const [locale, slug] = post.slug.split("/");

			return {
				locale,
				params: {
					slug,
				},
			};
		})

		sitemap({
			dynamicParams,
		});

		return {
			params: {
				slug: post.slug.split("/")[1],
			},
			props: {
				post,
				dynamicParams
			},
		}
	}));
}) satisfies GetStaticPaths;

const { post, dynamicParams } = Astro.props;

setDynamicParams(dynamicParams);
```